import yaml from 'yaml';
import parseJson from 'parse-json';
import importFresh from 'import-fresh';

const loadJs = function loadJs(filepath) {
    const result = importFresh(filepath);
    return result;
};


const loadJson = function loadJson(filepath, content) {
    try {
        const result = parseJson(content);
        return result;
    } catch (error) {
        error.message = `JSON Error in ${filepath}:\n${error.message}`;
        throw error;
    }
};

const loadYaml = function loadYaml(filepath, content) {
    try {
        const result = yaml.parse(content, { prettyErrors: true });
        return result;
    } catch (error) {
        error.message = `YAML Error in ${filepath}:\n${error.message}`;
        throw error;
    }
};

const loaders = { loadJs, loadJson, loadYaml };

export { loaders };
